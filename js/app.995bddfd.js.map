{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib/loop.js","webpack:///./src/components/Game.vue","webpack:///./src/game.worker.js","webpack:///./src/lib/engine.js","webpack:///./src/utils/string.js","webpack:///./src/components/Game.vue?6a95","webpack:///./src/maps/tests.js","webpack:///./src/lib/screen.js","webpack:///./src/App.vue?8827","webpack:///./src/App.vue","webpack:///./src/components/Game.vue?a8de","webpack:///./src/App.vue?97f5","webpack:///./src/main.ts","webpack:///./src/maps/main.js","webpack:///./src/lib/build-tools.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Event","this","callbacks","Reactor","events","Loop","fn","registerEvent","running","last","Date","now","_frame","_tick","tick","addEventListener","registerCallback","callback","eventName","event","dispatchEvent","eventArgs","forEach","start","requestAnimationFrame","stop","cancelAnimationFrame","time","dt","worker","Worker","engine","mapWorker","ret","args","postMessage","setup","loadGame","requestFrame","_draw","response","canvasBuffer","canvas","reset","currentLevel","nextLevel","config","level","handleFrame","e","dat","state","isAlive","params","URLSearchParams","location","search","debug","has","up","showVectors","showGhosts","showCollisions","levels","map","cloneNode","handlePress","handleRelease","preventDefault","stopPropagation","document","terminate","immediate","PROP_STATIC","PROP_COLLIDABLE","PROP_KILLER","PROP_WIN_ZONE","PROP_DRAWABLE","BASE_CONFIG","description","loadLevels","entries","k","v","initializeLevel","freeze","assign","noop","throttle","burn","burnFunc","_data","obj","burndownKey","timerKey","dy","clearTimeout","burnRemaining","strip","str","replace","ladder","CAMERA","BASE_HERO","x","y","BASE_OBSTACLE","w","BASE_PLATFORM","fallTest","dx","h","verticalPlatform","jumpObstacles","jump","impossiblePlatform","impossibleTrampoline","thinGapMapItems","concat","Number","thinGap","chunkPadsMapItems","chunkPads","chunkBedHop","chunkTreeTrunk","stairs","count","stepWidth","stepHeight","obstacleH","gap","platformX","overhang","chunkStairCase","chunkTightLeap","chunkFlamingDeath","chunkShortDrop","BASE_WALL","chunkWallGap","cameraX","camera","find","el","type","prepareCanvas","ctx","getContext","width","height","style","scale","flush","buffer","clearRect","drawImage","_drawRect","fillStyle","color","inCollision","fillRect","drawVectors","drawables","filter","properties","includes","strokeStyle","beginPath","cx","cy","vx","vy","moveTo","lineTo","stroke","drawGhosts","x0","y0","drawRects","drawGameOver","textAlign","font","fillText","drawGameWon","draw","isWinner","id","class","ref","href","render","__scopeId","components","Game","App","mount","level1","BASE_WIN_ZONE","clouds","level2","SHAPE","xMin","xMax","yMin","yMax","Math","random"],"mappings":"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","file":"js/app.995bddfd.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","// taken from https://github.com/mattdesl/raf-loop/blob/master/index.js\n// modified to remove external dependencies\n\nfunction Event(name) {\n  this.name = name;\n  this.callbacks = [];\n}\nEvent.prototype.registerCallback = function (callback) {\n  this.callbacks.push(callback);\n};\n\nfunction Reactor() {\n  this.events = {};\n}\n\nReactor.prototype.registerEvent = function (eventName) {\n  const event = new Event(eventName);\n  this.events[eventName] = event;\n};\n\nReactor.prototype.dispatchEvent = function (eventName, eventArgs) {\n  this.events[eventName].callbacks.forEach(function (callback) {\n    callback(eventArgs);\n  });\n};\n\nReactor.prototype.addEventListener = function (eventName, callback) {\n  this.events[eventName].registerCallback(callback);\n};\n\nexport function Loop(fn) {\n  if (!(this instanceof Loop)) {\n    return new Loop(fn);\n  }\n  this.events = new Reactor();\n  this.events.registerEvent(\"tick\");\n\n  this.running = false;\n  this.last = Date.now();\n  this._frame = 0;\n  this._tick = this.tick.bind(this);\n\n  if (fn) {\n    this.events.addEventListener(\"tick\", fn);\n  }\n}\n\nLoop.prototype.start = function () {\n  if (this.running) {\n    return;\n  }\n  this.running = true;\n  this.last = Date.now();\n  this._frame = requestAnimationFrame(this._tick);\n  return this;\n};\n\nLoop.prototype.stop = function () {\n  this.running = false;\n  if (this._frame !== 0) {\n    cancelAnimationFrame(this._frame);\n  }\n  this._frame = 0;\n  return this;\n};\n\nLoop.prototype.tick = function () {\n  this._frame = requestAnimationFrame(this._tick);\n  const time = Date.now();\n  const dt = time - this.last;\n  this.events.dispatchEvent(\"tick\", dt);\n  this.last = time;\n};\n","<template>\n  <div class=\"game\">\n    <div>\n      <select class=\"level-select\" v-model=\"level\">\n        <option :value=\"k\" v-for=\"(v, k) in levels\" :key=\"k\">\n          {{ v.config.name || k }}\n        </option>\n      </select>\n    </div>\n    <canvas ref=\"canvas\"></canvas>\n    <pre\n      v-if=\"dat.state && dat.state.isWinner && currentLevel.config.nextLevel\"\n    ><a href=\"\" @click.prevent=\"nextLevel\">next level</a></pre>\n    <pre v-else>{{ currentLevel.config.description }}</pre>\n\n    <template v-if=\"debug\">\n      <label>\n        <input type=\"checkbox\" v-model=\"state.showVectors\" />\n        show vectors\n      </label>\n      <br />\n      <label>\n        <input type=\"checkbox\" v-model=\"state.showGhosts\" />\n        show ghosts\n      </label>\n      <br />\n      <label>\n        <input type=\"checkbox\" v-model=\"state.showCollisions\" />\n        show collisions\n      </label>\n    </template>\n  </div>\n</template>\n\n<script>\n// eslint-disable-next-line\nimport { loadLevels } from \"@/lib/engine\";\nimport { draw, prepareCanvas, flush } from \"@/lib/screen\";\nimport { Loop } from \"@/lib/loop\";\nimport * as mainLevels from \"@/maps/main\";\nimport * as testLevels from \"@/maps/tests\";\nimport {\n  computed,\n  defineComponent,\n  onMounted,\n  onUnmounted,\n  reactive,\n  ref,\n  watch,\n} from \"@vue/runtime-core\";\n\nconst worker = new Worker(\"../game.worker.js\", { type: \"module\" });\nconst engine = new Loop();\n\nfunction mapWorker(worker, events) {\n  const ret = {};\n\n  events.forEach((event) => {\n    ret[event] = function (...args) {\n      worker.postMessage({ event, args: args });\n    };\n  });\n\n  return ret;\n}\n\nexport default defineComponent({\n  setup() {\n    const { loadGame, requestFrame } = {\n      ...mapWorker(worker, [\"loadGame\", \"requestFrame\"]),\n    };\n\n    function _draw(response) {\n      draw(canvasBuffer.value, response);\n      flush(canvasBuffer.value, canvas.value);\n    }\n\n    async function reset() {\n      loadGame(currentLevel.value);\n    }\n\n    function nextLevel() {\n      if (currentLevel.value.config.nextLevel) {\n        engine.stop();\n        level.value = currentLevel.value.config.nextLevel;\n        reset();\n      }\n    }\n\n    function handleFrame(e) {\n      const { event, response } = e.data;\n      dat.value = response;\n\n      if (event === \"requestFrame\") {\n        _draw(response);\n      }\n\n      if (!response.state.isAlive) {\n        engine.stop();\n      }\n\n      if (event === \"loadGame\") {\n        prepareCanvas(canvasBuffer.value, response);\n        prepareCanvas(canvas.value, response);\n\n        _draw(response);\n      }\n    }\n\n    const params = new URLSearchParams(window.location.search, true);\n\n    const debug = params.has(\"debug\");\n    const state = reactive({\n      up: false,\n      showVectors: false,\n      showGhosts: false,\n      showCollisions: false,\n    });\n    const levels = loadLevels({\n      ...mainLevels,\n      ...testLevels,\n    });\n    const level = ref(\"level1\");\n    let dat = ref({ config: {}, state: {}, map: [] });\n\n    const canvas = ref();\n    const canvasBuffer = ref();\n\n    const currentLevel = computed(() => {\n      return levels[level.value];\n    });\n\n    onMounted(() => {\n      canvasBuffer.value = canvas.value.cloneNode();\n\n      engine.events.addEventListener(\"tick\", (dt) =>\n        requestFrame({ ...state, dt })\n      );\n\n      worker.addEventListener(\"message\", (e) => handleFrame(e));\n\n      const handlePress = () => {\n        state.up = true;\n\n        if (dat.value.state && !dat.value.state.isAlive) {\n          reset();\n        } else if (!engine.running) {\n          engine.start();\n        }\n      };\n\n      const handleRelease = (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        state.up = false;\n      };\n\n      document.addEventListener(\"contextmenu\", (e) => e.preventDefault());\n      document.addEventListener(\"touchstart\", handlePress);\n      document.addEventListener(\"keydown\", handlePress);\n      document.addEventListener(\"touchend\", handleRelease);\n      document.addEventListener(\"keyup\", handleRelease);\n    });\n\n    onUnmounted(() => {\n      worker.terminate();\n    });\n\n    watch(level, () => reset(), { immediate: true });\n    watch(state, () => {\n      try {\n        _draw(dat.value);\n      } catch {\n        // ignore\n      }\n    });\n\n    return {\n      debug,\n      levels,\n      level,\n      currentLevel,\n      state,\n      dat,\n      canvas,\n      nextLevel,\n    };\n  },\n});\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n*:focus {\n  outline: none;\n}\n\nh1,\nh2 {\n  font-weight: normal;\n}\n\nul {\n  list-style-type: none;\n  padding: 0;\n}\n\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\n\na {\n  color: #42b983;\n}\n\n.level-select {\n  appearance: none;\n  background: none;\n  border: none;\n  font-size: 1rem;\n  font-family: monospace;\n  margin-bottom: 0.5rem;\n}\n</style>\n","module.exports = __webpack_public_path__ + \"js/0.84a13cbc.worker.js\"","import { intersects } from \"./collision\";\n\nexport const PROP_STATIC = \"static\";\nexport const PROP_COLLIDABLE = \"collideable\";\nexport const PROP_KILLER = \"killer\";\nexport const PROP_WIN_ZONE = \"win-zone\";\nexport const PROP_DRAWABLE = \"drawable\";\n\nconst BASE_CONFIG = {\n  name: \"\",\n  description: \"\",\n  showCollisions: false,\n  showVectors: false,\n  showGhosts: false,\n};\n\nexport function loadLevels(levels) {\n  for (let [k, v] of Object.entries(levels)) {\n    levels[k] = initializeLevel(v);\n  }\n  return levels;\n}\n\nexport function initializeLevel({ config, map }) {\n  const level = {\n    config: Object.freeze(Object.assign({}, BASE_CONFIG, config)),\n    map,\n  };\n\n  level.config = Object.freeze(level.config);\n\n  return level;\n}\n\nfunction getRectVertices(a) {\n  return {\n    a: { x: a.x, y: a.y },\n    b: { x: a.x, y: a.y + a.h },\n    c: { x: a.x + a.w, y: a.y + a.h },\n    d: { x: a.x + a.w, y: a.y },\n  };\n}\n\nfunction noop() {\n  // noop\n}\n\n// A throttling function with a few rules:\n//\n// - You must start burn while on the floor (dy == 0)\n// - Burn starts when global state is up\n// - Burn ends after timer, or when parent hits floor (dy == 0)\nfunction throttle(name, burn = 1000, burnFunc = noop) {\n  const _data = {};\n\n  return function _func(obj, data) {\n    const now = Date.now();\n    const burndownKey = `burndown`;\n    const timerKey = `timer`;\n\n    if (obj.dy === 0) {\n      clearTimeout(_data[timerKey]);\n      delete _data[burndownKey];\n    }\n\n    if (_data[burndownKey] == null) {\n      _data[burndownKey] = now + burn;\n    }\n\n    let burnRemaining = 0;\n\n    if (now <= _data[burndownKey]) {\n      burnRemaining = (_data[burndownKey] - now) / 1000;\n    }\n\n    return burnFunc.call(this, obj, data, burnRemaining);\n  };\n}\n\nconst accel = throttle(\"accel\", 500, function (obj, data, burn) {\n  if (data.state.up && burn > 0) {\n    return {\n      dy: burn * 1.001,\n    };\n  } else {\n    return {\n      dy: obj.dy - 0.08,\n    };\n  }\n});\n\nfunction furthestExtent(data) {\n  const extents = data.map.map((el) =>\n    el.properties.includes(PROP_STATIC) ? el.x + el.w : 0\n  );\n  const furthestExtent = Math.max(...extents);\n  return furthestExtent;\n}\n\nfunction atExtents(data) {\n  const camera = data.map.find((el) => el.type === \"camera\");\n\n  return camera.x + camera.w >= furthestExtent(data);\n}\n\nexport function move(data, state) {\n  data.state = { ...data.state, ...state };\n\n  const hero = data.map.find((el) => el.type === \"hero\");\n  Object.assign(hero, accel(hero, data));\n\n  data.map = data.map.map((el) => {\n    const obj = Object.assign({}, el);\n\n    if (!obj.properties.includes(PROP_STATIC)) {\n      obj.x0 = el.x;\n      obj.y0 = el.y;\n\n      obj.x += state.dt * el.dx;\n      obj.y += state.dt * el.dy;\n    }\n\n    return obj;\n  });\n\n  if (atExtents(data)) {\n    const camera = data.map.find((el) => el.type === \"camera\");\n    camera.x = furthestExtent(data) - camera.w;\n  }\n\n  return data;\n}\n\nexport function isJumping(data) {\n  const hero = data.map.find((el) => el.type === \"hero\");\n  return hero.dy !== 0;\n}\n\nfunction _detectCollision(a, b) {\n  const aV = getRectVertices(a);\n  const a0V = getRectVertices(Object.assign({}, a, { x: a.x0, y: a.y0 }));\n  const bV = getRectVertices(b);\n\n  const sides = [\n    [\"a\", \"b\"],\n    [\"b\", \"c\"],\n    [\"c\", \"d\"],\n    [\"d\", \"a\"],\n  ];\n\n  for (const ai in sides) {\n    if (ai) {\n      const aSide = sides[ai];\n      for (const bi in sides) {\n        if (bi) {\n          const bSide = sides[bi];\n\n          const intersection =\n            intersects(\n              aV[aSide[0]],\n              a0V[aSide[0]],\n              bV[bSide[0]],\n              bV[bSide[1]]\n            ) ||\n            intersects(\n              aV[aSide[0]],\n              aV[aSide[1]],\n              bV[bSide[0]],\n              bV[bSide[1]]\n            ) ||\n            intersects(\n              a0V[aSide[0]],\n              a0V[aSide[1]],\n              bV[bSide[0]],\n              bV[bSide[1]]\n            ) ||\n            intersects(\n              a0V[aSide[0]],\n              a0V[aSide[1]],\n              bV[bSide[0]],\n              bV[bSide[1]]\n            );\n\n          if (intersection) {\n            return [intersection, bSide.join(\"\")];\n          }\n        }\n      }\n    }\n  }\n\n  return null;\n}\n\nexport function detectCollision(data, map) {\n  const collisions = [];\n  const collidables = {\n    heros: [],\n    static: [],\n  };\n  map.reduce((m, o) => {\n    if (\n      !o.properties.includes(PROP_STATIC) &&\n      o.properties.includes(PROP_COLLIDABLE)\n    ) {\n      m.heros.push(o);\n    } else if (o.properties.includes(PROP_COLLIDABLE)) {\n      m.static.push(o);\n    }\n    return m;\n  }, collidables);\n\n  if (data.state.showCollisions) {\n    map.forEach((o) => {\n      o.inCollision = false;\n    });\n  }\n\n  collidables.heros.forEach((a) => {\n    collidables.static.forEach((o) => {\n      if (a === o) {\n        return;\n      }\n\n      const collision = _detectCollision(a, o);\n      if (collision) {\n        const [intersection, side] = collision;\n\n        if (data.state.showCollisions) {\n          a.inCollision = true;\n          o.inCollision = true;\n        }\n\n        collisions.push([a, o, intersection, side]);\n      }\n    });\n  });\n\n  return collisions;\n}\n\nfunction pathag(a, b) {\n  return Math.sqrt(Math.pow(a, 2) + Math.pow(b, 2));\n}\n\nfunction sortCollisions(a, b) {\n  const da = pathag(a[2].dx, a[2].dy);\n  const db = pathag(b[2].dx, b[2].dy);\n\n  if (da < db) {\n    return -1;\n  }\n\n  if (da > db) {\n    return 1;\n  }\n\n  return 0;\n}\n\nfunction filterCollisions(collision) {\n  const collisionDistance = pathag(collision[2].dx, collision[2].dy);\n  return collisionDistance > 0.1;\n}\n\nexport function handleCollisions(data, collisions) {\n  if ((collisions && collisions.length === 0) || data.state.isWinner === true) {\n    return data;\n  }\n\n  const closestCollision = collisions.sort(sortCollisions)[0];\n  const nearCollisions = collisions.filter(filterCollisions, {});\n\n  // Allow hero to move once per axis, this is to handle pinch points between\n  // two static objects and a collider. This is necessary to prevent the\n  // movement of the same hero along a single axis. This could be avoided if\n  // the data model was immutable.\n  let hasMovedX = false;\n  let hasMovedY = false;\n\n  [closestCollision, ...nearCollisions].forEach((col) => {\n    const [hero, collision, intersection, side] = col;\n\n    if (collision.type === \"platform\" && hero.dy < 0) {\n      hero.y += intersection.dy;\n      hero.dy = 0;\n    }\n\n    if (collision.properties.includes(PROP_KILLER)) {\n      data.state.isAlive = false;\n    }\n\n    if (collision.properties.includes(PROP_WIN_ZONE)) {\n      data.state.isWinner = true;\n    }\n\n    if (collision.properties.includes(PROP_COLLIDABLE)) {\n      if (side === \"da\" && hasMovedY === false) {\n        hero.y += intersection.dy - hero.h;\n        hasMovedY = true;\n      } else if (side === \"ab\" && hasMovedX === false) {\n        hero.x += intersection.dx - hero.w;\n        hasMovedX = true;\n      } else if (side === \"bc\" && hero.dy < 0 && hasMovedY === false) {\n        hero.y += intersection.dy;\n        hasMovedY = true;\n      } else if (side === \"cd\" && hasMovedX === false) {\n        hero.x += intersection.dx;\n        hasMovedX = true;\n      }\n    }\n  });\n\n  return data;\n}\n\nexport function createFrame(data) {\n  // turn data into a single flat frame filled with objects to paint\n  return data;\n}\n","export function strip(str) {\n  return str[0].replace(/^\\n/, \"\").replace(/^(\\s+)/gm, \"\");\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Game.vue?vue&type=style&index=0&id=52fdb37e&scoped=true&lang=css\"","import {\n  BASE_HERO,\n  BASE_OBSTACLE,\n  BASE_PLATFORM,\n  BASE_WALL,\n  CAMERA,\n} from \"@/lib/build-tools\";\nimport { strip } from \"@/utils/string\";\n\nexport const ladder = {\n  map: [\n    Object.assign({}, CAMERA),\n    Object.assign({}, BASE_HERO, { x: 30, y: 1 }),\n    Object.assign({}, BASE_OBSTACLE, { w: 99999, y: -100 }),\n\n    Object.assign({}, BASE_PLATFORM, { x: 0, y: 0, w: 300 }),\n    Object.assign({}, BASE_PLATFORM, { x: 200, y: 6, w: 300 }),\n    Object.assign({}, BASE_PLATFORM, { x: 400, y: 11, w: 300 }),\n  ],\n};\n\nexport const fallTest = {\n  config: {\n    showCollisions: true,\n    description: strip`\n      demonstrates issues with collision\n      detection around two near collidables\n\n      play a few times to see the various responses`,\n  },\n  map: [\n    Object.assign({}, CAMERA),\n    Object.assign({}, BASE_HERO, { x: 2, y: 180, dx: 0 }),\n    Object.assign({}, BASE_PLATFORM, { x: 0, y: 110, w: 14 }),\n    Object.assign({}, BASE_OBSTACLE, { x: 0, y: -999, w: 14, h: 999 + 100 }),\n  ],\n};\n\nexport const verticalPlatform = {\n  config: {\n    description: strip`\n      Platforms do not handle horizontal collisions very well`,\n  },\n  map: [\n    Object.assign({}, CAMERA),\n    Object.assign({}, BASE_HERO, {\n      x: 30,\n      y: 1,\n      dx: 0.3,\n    }),\n    Object.assign({}, BASE_PLATFORM, { x: 0, y: 0, w: 300 }),\n    Object.assign({}, BASE_PLATFORM, { x: 200, y: 0, w: 1, h: 50 }),\n    Object.assign({}, BASE_OBSTACLE, { x: 250, y: 0, w: 10, h: 50 }),\n  ],\n};\n\nconst jumpObstacles = [];\n\nfor (let i = 0; i < 30; i++) {\n  jumpObstacles.push(\n    Object.assign({}, BASE_OBSTACLE, {\n      x: 200 + 300 * i,\n      y: 0,\n      w: 10,\n      h: 10 * i + 1,\n    })\n  );\n}\n\nexport const jump = {\n  map: [\n    Object.assign({}, CAMERA),\n    Object.assign({}, BASE_HERO, {\n      x: 30,\n      y: 1,\n    }),\n    Object.assign({}, BASE_PLATFORM, { x: 0, y: 0, w: 99999 }),\n    Object.assign({}, BASE_OBSTACLE, { x: 0, y: -100, w: 99999, h: 0 }),\n    ...jumpObstacles,\n  ],\n};\n\nexport const impossiblePlatform = {\n  config: {\n    description: strip`\n    this platform shouldn't be reachable\n    `,\n  },\n  map: [\n    Object.assign({}, CAMERA),\n    Object.assign({}, BASE_PLATFORM, { x: 0, y: 0, w: 300 }),\n\n    Object.assign({}, BASE_HERO, { x: 30, y: 1, dx: 0 }),\n    Object.assign({}, BASE_PLATFORM, { x: 0, y: 140, w: 150 }),\n    Object.assign({}, BASE_OBSTACLE, { x: 0, y: 270, w: 150, h: 20 }),\n  ],\n};\n\nexport const impossibleTrampoline = {\n  config: {\n    description: strip`\n    Bounce bounce bounce\n    `,\n  },\n  map: [\n    Object.assign({}, CAMERA),\n    Object.assign({}, BASE_PLATFORM, { x: 0, y: 0, w: 300 }),\n\n    Object.assign({}, BASE_HERO, { x: 30, y: 1, dx: 0 }),\n    Object.assign({}, BASE_PLATFORM, { x: 40, y: 50, w: 50 }),\n    Object.assign({}, BASE_PLATFORM, { x: -20, y: 50, w: 50 }),\n  ],\n};\n\nlet thinGapMapItems = [];\n\nfor (let i = 0; i < 500; i++) {\n  thinGapMapItems = thinGapMapItems.concat([\n    Object.assign({}, BASE_PLATFORM, {\n      x: 100 * i,\n      y: 50,\n      w: 100 - Number(i * 2),\n    }),\n  ]);\n}\n\nexport const thinGap = {\n  config: {\n    showCollisions: true,\n  },\n  map: [\n    Object.assign({}, CAMERA),\n    ...thinGapMapItems,\n    Object.assign({}, BASE_HERO, {\n      x: 30,\n      y: 52,\n    }),\n    Object.assign({}, BASE_OBSTACLE, { x: 0, y: 0, w: 99999, h: 10 }),\n  ],\n};\n\nconst chunkPadsMapItems = [];\n\nfor (let i = 0; i < 50; i++) {\n  chunkPadsMapItems.push(\n    Object.assign({}, BASE_PLATFORM, {\n      x: 450 + 150 * i,\n      y: 50,\n      w: 100 - Number(i),\n    })\n  );\n}\n\nexport const chunkPads = {\n  map: [\n    Object.assign({}, CAMERA),\n    Object.assign({}, BASE_HERO, { x: 30, y: 1 }),\n    Object.assign({}, BASE_PLATFORM, { x: 0, y: 0, w: 450 }),\n    ...chunkPadsMapItems,\n    Object.assign({}, BASE_OBSTACLE, { x: 0, y: -100, w: 99999, h: 0 }),\n  ],\n};\n\nexport const chunkBedHop = {\n  map: [\n    Object.assign({}, CAMERA),\n    Object.assign({}, BASE_HERO, { x: 30, y: 1 }),\n    Object.assign({}, BASE_PLATFORM, { x: 0, y: 0, w: 900 }),\n    Object.assign({}, BASE_PLATFORM, { x: 450, y: 50, w: 200 }),\n    Object.assign({}, BASE_OBSTACLE, { x: 400, y: 0, w: 300, h: 20 }),\n    Object.assign({}, BASE_OBSTACLE, { x: 0, y: -100, w: 99999, h: 0 }),\n  ],\n};\n\nexport const chunkTreeTrunk = {\n  map: [\n    Object.assign({}, CAMERA),\n    Object.assign({}, BASE_HERO, { x: 30, y: 1 }),\n    Object.assign({}, BASE_PLATFORM, { x: 0, y: 0, w: 900 }),\n    Object.assign({}, BASE_OBSTACLE, { x: 450, y: 0, w: 20, h: 60 }),\n    Object.assign({}, BASE_PLATFORM, { x: 500, y: 100, w: 100 }),\n    Object.assign({}, BASE_OBSTACLE, { x: 600, y: 30, w: 20, h: 150 }),\n    Object.assign({}, BASE_PLATFORM, { x: 620, y: 150, w: 100 }),\n    Object.assign({}, BASE_OBSTACLE, { x: 700, y: 0, w: 20, h: 80 }),\n    Object.assign({}, BASE_OBSTACLE, { x: 0, y: -100, w: 99999, h: 0 }),\n  ],\n};\n\n// should probably make this more generic and just call it a \"repeatable\"\nfunction stairs(config) {\n  const stairs = [];\n\n  for (let i = 1; i <= config.count; i++) {\n    const w = config.stepWidth;\n    const x = config.x + w * i;\n    const h = config.stepHeight * i;\n    const obstacleH = h - config.gap;\n    const platformX = x - config.overhang;\n\n    stairs.push(Object.assign({}, BASE_PLATFORM, { x: platformX, y: h, w }));\n    stairs.push(Object.assign({}, BASE_OBSTACLE, { x, y: 0, w, h: obstacleH }));\n  }\n\n  return stairs;\n}\n\nexport const chunkStairCase = {\n  map: [\n    Object.assign({}, CAMERA),\n    Object.assign({}, BASE_HERO, { x: 30, y: 1 }),\n    Object.assign({}, BASE_PLATFORM, { x: 0, y: 0, w: 900 }),\n    ...stairs({\n      count: 4,\n      x: 450,\n      y: 0,\n      stepHeight: 30,\n      stepWidth: 150,\n      gap: 10,\n      overhang: 75,\n    }),\n    Object.assign({}, BASE_OBSTACLE, { x: 0, y: -100, w: 99999, h: 0 }),\n  ],\n};\n\nexport const chunkTightLeap = {\n  map: [\n    Object.assign({}, CAMERA),\n    Object.assign({}, BASE_HERO, { x: 30, y: 1 }),\n    Object.assign({}, BASE_OBSTACLE, { x: 0, y: -100, w: 99999, h: 0 }),\n\n    Object.assign({}, BASE_PLATFORM, { x: 0, y: 0, w: 400 }),\n    Object.assign({}, BASE_OBSTACLE, { x: 450, y: 120, w: 20, h: 300 }),\n    Object.assign({}, BASE_PLATFORM, { x: 520, y: 0, w: 300 }),\n\n    Object.assign({}, BASE_OBSTACLE, { x: 840, y: 80, w: 20, h: 300 }),\n    Object.assign({}, BASE_PLATFORM, { x: 880, y: 0, w: 300 }),\n  ],\n};\n\nexport const chunkFlamingDeath = {\n  map: [\n    Object.assign({}, CAMERA),\n    Object.assign({}, BASE_HERO, { x: 30, y: 1 }),\n    Object.assign({}, BASE_PLATFORM, { x: 0, y: 0, w: 500 }),\n    Object.assign({}, BASE_OBSTACLE, { x: 0, y: -100, w: 99999, h: 0 }),\n\n    Object.assign({}, BASE_OBSTACLE, { x: 290, y: 0, w: 20, h: 40 }),\n    Object.assign({}, BASE_OBSTACLE, { x: 290, y: 80, w: 20, h: 300 }),\n  ],\n};\n\nexport const chunkShortDrop = {\n  map: [\n    Object.assign({}, CAMERA),\n    Object.assign({}, BASE_HERO, { x: 30, y: 51 }),\n    Object.assign({}, BASE_PLATFORM, { x: 0, y: 50, w: 250 }),\n    Object.assign({}, BASE_OBSTACLE, { x: 0, y: -100, w: 99999, h: 0 }),\n\n    Object.assign({}, BASE_OBSTACLE, { x: 290, y: 55, w: 20, h: 300 }),\n    Object.assign({}, BASE_WALL, { x: 450, y: 80, w: 10, h: 300 }),\n    Object.assign({}, BASE_PLATFORM, { x: 275, y: 10, w: 50 }),\n    Object.assign({}, BASE_PLATFORM, { x: 400, y: 80, w: 500 }),\n  ],\n};\n\nexport const chunkWallGap = {\n  map: [\n    Object.assign({}, CAMERA),\n    Object.assign({}, BASE_HERO, { x: 30, y: 1 }),\n    Object.assign({}, BASE_PLATFORM, { x: 0, y: 0, w: 1500 }),\n    Object.assign({}, BASE_OBSTACLE, { x: 0, y: -100, w: 99999, h: 0 }),\n\n    Object.assign({}, BASE_PLATFORM, { x: 0, y: 80, w: 900 }),\n    Object.assign({}, BASE_WALL, { x: 0, y: 70, w: 400, h: 10 }),\n    Object.assign({}, BASE_WALL, { x: 500, y: 70, w: 400, h: 10 }),\n    Object.assign({}, BASE_PLATFORM, { x: 1000, y: 80, w: 500 }),\n    Object.assign({}, BASE_WALL, { x: 1000, y: 70, w: 500, h: 10 }),\n  ],\n};\n","import { PROP_DRAWABLE } from \"./engine\";\n\nfunction cameraX(data) {\n  const camera = data.map.find((el) => el.type === \"camera\");\n  return camera.x;\n}\n\nexport function prepareCanvas(canvas, data) {\n  const ctx = canvas.getContext(\"2d\");\n  const camera = data.map.find((el) => el.type === \"camera\");\n\n  canvas.width = camera.w * 2;\n  canvas.height = camera.h * 2;\n  canvas.style.width = `${camera.w}px`;\n  canvas.style.height = `${camera.h}px`;\n  ctx.scale(2, 2);\n\n  return ctx;\n}\n\nexport function flush(buffer, canvas) {\n  const ctx = canvas.getContext(\"2d\");\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.drawImage(buffer, 0, 0, canvas.width / 2, canvas.height / 2);\n}\n\nfunction _drawRect(ctx, data, r) {\n  const camera = data.map.find((el) => el.type === \"camera\");\n  const x = r.x;\n  const y = camera.h - r.y - r.h;\n  const width = r.w;\n  const height = r.h;\n\n  ctx.fillStyle = r.color;\n\n  if (data.state.showCollisions && r.inCollision) {\n    ctx.fillStyle = \"red\";\n  }\n\n  ctx.fillRect(x - cameraX(data), y, width, height);\n}\n\nexport function drawVectors(ctx, data) {\n  const drawables = data.map.filter((el) =>\n    el.properties.includes(PROP_DRAWABLE)\n  );\n  const camera = data.map.find((el) => el.type === \"camera\");\n  drawables.forEach((r) => {\n    ctx.strokeStyle = \"red\";\n    ctx.beginPath();\n    const cx = r.x - cameraX(data) + r.w / 2;\n    const cy = camera.h - r.y - r.h + r.h / 2;\n\n    const vx = r.dx * 50;\n    const vy = r.dy * 50;\n    ctx.moveTo(cx, cy);\n    ctx.lineTo(cx + vx, cy - vy);\n    ctx.stroke();\n  });\n}\n\nexport function drawGhosts(ctx, data) {\n  const camera = data.map.find((el) => el.type === \"camera\");\n  const drawables = data.map.filter((el) =>\n    el.properties.includes(PROP_DRAWABLE)\n  );\n  drawables.forEach((r) => {\n    ctx.fillStyle = \"blue\";\n    ctx.fillRect(r.x0 - cameraX(data), camera.h - r.y0 - r.h, r.w, r.h);\n  });\n}\n\nexport function drawRects(ctx, data) {\n  const drawables = data.map.filter((el) =>\n    el.properties.includes(PROP_DRAWABLE)\n  );\n  drawables.forEach((r) => _drawRect(ctx, data, r));\n}\n\nexport function drawGameOver(ctx, data) {\n  const camera = data.map.find((el) => el.type === \"camera\");\n\n  ctx.fillStyle = \"#333333\";\n  ctx.textAlign = \"center\";\n  ctx.font = \"24px monospace\";\n  ctx.fillText(\"Game Over\", camera.w / 2, camera.h / 2);\n}\n\nexport function drawGameWon(ctx, data) {\n  const camera = data.map.find((el) => el.type === \"camera\");\n  ctx.fillStyle = \"#efefef\";\n  ctx.textAlign = \"center\";\n  ctx.font = \"24px monospace\";\n  ctx.fillText(\n    data.config.nextLevel ? \"You Win!\" : \"Kill Screen\",\n    camera.w / 2,\n    camera.h / 2\n  );\n}\n\nexport function draw(canvas, data) {\n  const ctx = canvas.getContext(\"2d\");\n\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n  if (data.state.showGhosts) {\n    drawGhosts(ctx, data);\n  }\n\n  drawRects(ctx, data);\n\n  if (data.state.showVectors) {\n    drawVectors(ctx, data);\n  }\n\n  if (!data.state.isAlive) {\n    drawGameOver(ctx, data);\n  }\n\n  if (data.state.isWinner) {\n    drawGameWon(ctx, data);\n  }\n}\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=dd005110&lang=css\"","<template>\n  <div id=\"app\">\n    <game></game>\n  </div>\n</template>\n\n<script>\nimport { defineComponent } from \"vue\";\nimport Game from \"./components/Game.vue\";\n\nexport default defineComponent({\n  components: {\n    Game\n  },\n\n  name: 'app'\n})\n</script>\n\n<style>\n#app {\n  width: 300px;\n  margin: auto;\n  margin-top: 40px;\n  font-family: monospace;\n}\n\n* {\n  -webkit-touch-callout: none; /* iOS Safari */\n    -webkit-user-select: none; /* Safari */\n     -khtml-user-select: none; /* Konqueror HTML */\n       -moz-user-select: none; /* Firefox */\n        -ms-user-select: none; /* Internet Explorer/Edge */\n            user-select: none; /* Non-prefixed version, currently\n                                  supported by Chrome and Opera */\n}\n</style>\n","import { render } from \"./Game.vue?vue&type=template&id=52fdb37e&scoped=true\"\nimport script from \"./Game.vue?vue&type=script&lang=js\"\nexport * from \"./Game.vue?vue&type=script&lang=js\"\n\nimport \"./Game.vue?vue&type=style&index=0&id=52fdb37e&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-52fdb37e\"\n\nexport default script","import { render } from \"./App.vue?vue&type=template&id=dd005110\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=dd005110&lang=css\"\nscript.render = render\n\nexport default script","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\n\ncreateApp(App).mount(\"#app\");\n","import {\n  clouds,\n  CAMERA,\n  BASE_HERO,\n  BASE_OBSTACLE,\n  BASE_PLATFORM,\n  BASE_WIN_ZONE,\n} from \"@/lib/build-tools\";\nimport { strip } from \"@/utils/string\";\n\nexport const level1 = {\n  config: {\n    name: \"Level 1\",\n    description: strip`\n      press any button to begin\n      press any button to jump`,\n    nextLevel: \"level2\",\n  },\n  map: [\n    Object.assign({}, CAMERA),\n    Object.assign({}, BASE_WIN_ZONE, { w: 300, h: 300, x: 2050, y: 0 }),\n    ...clouds(100, 0, 2350, 150, 300, { color: \"#dfdfdf\" }),\n    Object.assign({}, BASE_HERO, { x: 30, y: 1 }),\n    Object.assign({}, BASE_OBSTACLE, { w: 2350, y: -100 }),\n    Object.assign({}, BASE_PLATFORM, { x: 0, y: 0, w: 1200 }),\n    Object.assign({}, BASE_PLATFORM, { x: 1250, w: 300 }),\n    Object.assign({}, BASE_PLATFORM, { x: 1800, w: 500 }),\n    Object.assign({}, BASE_PLATFORM, { x: 1450, y: 50, w: 400 }),\n    Object.assign({}, BASE_OBSTACLE, { w: 20, y: 0, h: 10, x: 450 }),\n    Object.assign({}, BASE_OBSTACLE, { w: 20, y: 0, h: 10, x: 750 }),\n    Object.assign({}, BASE_OBSTACLE, { w: 20, y: 0, h: 50, x: 900 }),\n    Object.assign({}, BASE_OBSTACLE, { w: 20, y: 150, h: 1500, x: 1800 }),\n  ],\n};\n\nexport const level2 = {\n  config: {\n    name: \"Level 2\",\n    description: strip`\n      Rinse & repeat`,\n  },\n  map: [\n    Object.assign({}, CAMERA),\n    Object.assign({}, BASE_WIN_ZONE, { w: 300, h: 300, x: 3200, y: 0 }),\n    ...clouds(100, 0, 3500, 150, 300, { color: \"#dfdfdf\" }),\n    Object.assign({}, BASE_HERO, { x: 30, y: 1 }),\n    Object.assign({}, BASE_OBSTACLE, { w: 3500, y: -100 }),\n    Object.assign({}, BASE_PLATFORM, { y: 0, w: 300 }),\n    Object.assign({}, BASE_PLATFORM, { w: 100, x: 200, y: 40 }),\n    Object.assign({}, BASE_PLATFORM, { w: 500, x: 400, y: 40 }),\n    Object.assign({}, BASE_PLATFORM, { w: 50, x: 1000, y: 40 }),\n    Object.assign({}, BASE_PLATFORM, { w: 50, x: 1150, y: 40 }),\n    Object.assign({}, BASE_PLATFORM, { w: 50, x: 1300, y: 40 }),\n    Object.assign({}, BASE_PLATFORM, { w: 50, x: 1450, y: 40 }),\n    Object.assign({}, BASE_PLATFORM, { w: 500, x: 1650, y: 40 }),\n    Object.assign({}, BASE_PLATFORM, { w: 200, x: 2150, y: 160 }),\n    Object.assign({}, BASE_PLATFORM, { w: 300, x: 2530, y: 70 }),\n    Object.assign({}, BASE_PLATFORM, { w: 150, x: 2610, y: 120 }),\n    Object.assign({}, BASE_OBSTACLE, { w: 20, y: 190, h: 1000, x: 2860 }),\n    Object.assign({}, BASE_PLATFORM, { w: 200, x: 2950, y: 160 }),\n  ],\n};\n","import {\n  PROP_STATIC,\n  PROP_COLLIDABLE,\n  PROP_KILLER,\n  PROP_WIN_ZONE,\n  PROP_DRAWABLE,\n} from \"./engine\";\n\nexport const CAMERA = {\n  type: \"camera\",\n  properties: [],\n  h: 300,\n  w: 300,\n  x: 0,\n  y: 0,\n  x0: 0,\n  y0: 0,\n  dx: 0.25,\n  dy: 0,\n};\n\nexport const SHAPE = {\n  type: \"shape\",\n  properties: [PROP_DRAWABLE],\n  h: 0,\n  w: 0,\n  x: 0,\n  y: 0,\n};\n\nexport const BASE_OBSTACLE = Object.assign({}, SHAPE, {\n  type: \"obstacle\",\n  color: \"#333333\",\n  properties: [PROP_STATIC, PROP_DRAWABLE, PROP_COLLIDABLE, PROP_KILLER],\n});\n\nexport const BASE_WALL = Object.assign({}, SHAPE, {\n  type: \"wall\",\n  color: \"#999999\",\n  properties: [PROP_STATIC, PROP_DRAWABLE, PROP_COLLIDABLE],\n});\n\nexport const BASE_PLATFORM = Object.assign({}, SHAPE, {\n  type: \"platform\",\n  color: \"#333333\",\n  properties: [PROP_STATIC, PROP_DRAWABLE, PROP_COLLIDABLE],\n  h: 1,\n});\n\nexport const BASE_WIN_ZONE = Object.assign({}, SHAPE, {\n  type: \"win-zone\",\n  color: \"#454545\",\n  properties: [PROP_STATIC, PROP_DRAWABLE, PROP_COLLIDABLE, PROP_WIN_ZONE],\n});\n\nexport const BASE_HERO = Object.assign({}, SHAPE, {\n  type: \"hero\",\n  color: \"#333333\",\n  properties: [PROP_DRAWABLE, PROP_COLLIDABLE],\n  h: 10,\n  w: 10,\n  x: 30,\n  x0: 0,\n  y0: 0,\n  dx: 0.25,\n  dy: 0,\n});\n\nexport function clouds(\n  count = 10,\n  xMin = 0,\n  xMax = 100,\n  yMin = 0,\n  yMax = 100,\n  config = {}\n) {\n  const clouds = [];\n\n  for (let i = 0; i < count; i++) {\n    clouds.push(\n      Object.assign({}, SHAPE, config, {\n        x: Math.random() * (xMax - xMin) + xMin,\n        y: Math.random() * (yMax - yMin) + yMin,\n        w: Math.random() * 100,\n        h: 1,\n        x0: 0,\n        y0: 0,\n        dx: Math.random() * -0.1,\n        dy: 0,\n      })\n    );\n  }\n\n  return clouds;\n}\n"],"sourceRoot":""}